<!DOCTYPE html>
<html lang="en">
<head>
  <!--#include file="/common/head.html"-->
  <meta name="description" content="Rosetta英语学习笔记">
  <title>英语学习篇 | 亦可用</title>
  <script src="/js/vendor/vue.js"></script>
  <script src="/js/vendor/yikeyong.min.js"></script>
</head>
<body class="page-article">
<!--#include file="/common/nav.html"-->

<div class="container" id="app">
  <nav class="nav-article">
    <button class="btn-ghost" :class="{focus: cIndex === i}" type="button" v-for="(chapter, i) of chapters" @click="cIndex = i">{{chapter.name}}</button>
  </nav>

  <section class="nav-chapter" v-for="(chapter, i) of chapters" v-if="cIndex === i">
    <ul class="list">
      <li v-for="(section, j) of chapter.sections">
        <button class="btn-ghost" :class="{focus: sIndex === j}" type="button" @click="sIndex = j">{{section.name}}</button>
      </li>
    </ul>
  </section>

  <div class="content" v-if="chapters[cIndex]">
    <article class="blog">
      <ul>
        <li v-for="p of chapters[cIndex].sections[sIndex].content">{{p}}</li>
      </ul>
    </article>
  </div>
</div>

<!--#include file="/common/footer.html"-->

<script>
  new Vue({
    el: '#app',
    data: {
      chapters: [],
      cIndex: 0,
      sIndex: 0
    },
    watch: {
      cIndex() {
        this.sIndex = 0
      }
    },
    created() {
      utils.fetch('/js/data/rosetta.json')
        .then(body => {
          this.chapters = body
        })
        .catch(error => this.$msg({
          type: 'error',
          message: error
        }))
    }
  })
</script>
</body>
</html>

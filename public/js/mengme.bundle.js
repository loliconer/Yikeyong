!function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var i={};t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=4)}({4:function(e,t){const i={hair:"hair_20",hairColor:"#000000",scalpColor:"#4F4F4F",head:"head_01",eye:"yanjing_34",eyebrow:"meimao_07",nose:"bizi_13",glasses:"glass_00",mouth:"zuiba_11",beard:"huzi_00",body:"body_04",bodyType:"sleeve",bodySuit:"",shoes:"#FFFFFF",trousers:"#323242",clothColor:"#FF7095",clothStyle:"yifu_07",skin:"#FFE4C0"};new Vue({el:"#app",data:{scene:null,camera:null,renderer:null,controls:null,theta:0,model:{hair:{name:i.hair,list:{hairColor:i.hairColor,scalpColor:i.scalpColor},image:{}},head:{name:i.head,list:{eye:i.eye,eyebrow:i.eyebrow,nose:i.nose,glasses:i.glasses,mouth:i.mouth,beard:i.beard},image:{}},body:{name:i.body,type:i.bodyType,suit:i.bodySuit,list:{shoes:i.shoes,trousers:i.trousers,clothColor:i.clothColor,clothStyle:i.clothStyle},image:{}},skin:{color:i.skin}},parts:["head","hair","haircolor","eyebrow","eye","glasses","nose","beard","mouth","skin","body","clothstyle","clothcolor","trousers","shoes"]},methods:{init(){this.scene=new THREE.Scene,this.scene.fog=new THREE.FogExp2(16777215,5e-5),this.camera=new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,.1,2e4),this.camera.position.set(0,100,1200),this.renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!1}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setClearColor(7829367,1),this.renderer.gammaInput=!0,this.renderer.gammaOutput=!0,this.$el.insertBefore(this.renderer.domElement,this.$el.firstChild),this.addLight(),this.addSky(),this.addFloor(),this.addModels(),window.addEventListener("resize",()=>{this.camera.aspect=window.innerWidth/window.innerHeight;this.camera.updateProjectionMatrix();this.renderer.setSize(window.innerWidth,window.innerHeight)},!1),this.controls=new THREE.OrbitControls(this.camera,this.renderer.domElement),this.controls.minDistance=1e3,this.controls.maxDistance=1800,this.animate()},addLight(){this.scene.add(new THREE.AmbientLight(2236962));let e=new THREE.DirectionalLight(16777215,.8);e.position.set(0,0,1),e.castShadow=!0,e.shadowDarkness=.65,this.scene.add(e);let t=new THREE.DirectionalLight(16777215,.5);t.position.set(1,0,-1),this.scene.add(t);let i=new THREE.DirectionalLight(16777215,.5);i.position.set(-1,0,-1),this.scene.add(i)},addSky(){let e=new THREE.BoxGeometry(1e4,1e4,1e4),t=new THREE.Mesh(e,this.createBoxMaterial());t.name="sky",t.position.y+=65,this.scene.add(t)},addFloor(){let e=new THREE.PlaneBufferGeometry(10240,10240),t=new THREE.Mesh(e,this.createFloorMaterial());t.name="floor",t.castShadow=!1,t.receiveShadow=!0,t.position.set(0,-330,0),t.rotation.x=-Math.PI/2,this.scene.add(t)},addModels(){this.modelLoader("hair"),this.modelLoader("head"),this.modelLoader("body")},modelLoader(e){const t=new THREE.ObjectLoader;let i=`/public/img/mengme/models/${this.model[e].name}.json`;t.load(i,e=>{let t=e.children[0];t.position.set(0,330,0);this.scene.add(t)})},createBoxMaterial(){let e=[];const t=["px","nx","py","ny","pz","nz"];for(let i=0;i<6;i++){let n=THREE.ImageUtils.loadTexture("/public/img/mengme/sky-midautumn-"+t[i]+".png");n.minFilter=THREE.LinearFilter,e.push(new THREE.MeshBasicMaterial({map:n,side:THREE.BackSide,color:16777215,specular:1118481}))}return new THREE.MeshFaceMaterial(e)},createFloorMaterial(){let e=THREE.ImageUtils.loadTexture("/public/img/mengme/sky-midautumn-ny.png");return e.minFilter=THREE.LinearFilter,new THREE.MeshBasicMaterial({map:e,side:THREE.DoubleSide})},animate(){requestAnimationFrame(this.animate),this.renderer.render(this.scene,this.camera),this.controls.update()}},mounted(){this.init()}})}});
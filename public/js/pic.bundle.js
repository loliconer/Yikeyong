!function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=5)}([function(e,t,n){var o=n(6)(n(1),n(7),null,null,null);o.options.__file="/home/scott/workspace/Yikeyong/src/js/widgets/viewer.vue",o.esModule&&Object.keys(o.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),o.options.functional&&console.error("[vue-loader] viewer.vue: functional components are not supported with templates, they should use render functions."),e.exports=o.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=n.n(o);t.default={data(){return{bShowViewer:!1,index:0,jsonData:null,type:"",images:{base:"beauty/校园女生",files:["nvsheng0001.jpg"]},ratio:1,degree:0}},computed:{imgStyle(){return{transform:`scale(${this.ratio}) rotate(${this.degree}deg)`,background:`url(/spa/img/${this.images.base}/${this.images.files[this.index]}) no-repeat center`}}},methods:{show(e){this.type=e,this.jsonData?this.images=this.jsonData[this.type]:i.a.fetch("/js/images.json").then(t=>{this.jsonData=t;this.images=t[e]}),this.bShowViewer=!0},close(){this.index=0,this.reset(),this.bShowViewer=!1},prev(){0!==this.index&&(this.reset(),this.index--)},next(){this.index!==this.images.files.length-1&&(this.reset(),this.index++)},reset(){this.ratio=1,this.degree=0}}}},,function(e,t){e.exports={init(){return new Promise((e,t)=>{this.asyncFetch({type:"get",url:"user"}).then(t=>{let n=location.pathname,o=!1;let i=[];"/"===n?o=!0:(t.menu.forEach(e=>{e.url?i.push(e.url):e.submenu&&e.submenu.forEach(e=>{i.push(e.url)})}),o=i.includes(n));o?(e(t),sessionStorage.csrf=t.csrf):document.write("无权限访问")}).catch(e=>{401===e?location.href="/login.html":console.log(e)})})},fetch(e){"string"==typeof e?e={type:"get",url:e}:e.type=e.type||"get";let t={get:{},post:{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.data)},form:{method:"post",body:e.data},put:{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.data)},putForm:{method:"put",body:e.data},delete:{method:"delete"}}[e.type];t.credentials="same-origin",t.headers=t.headers||{},t.headers.Accept="application/json","get"!==e.type&&(t.headers["X-CSRFToken"]=sessionStorage.csrf);let n=new Request(`/api/v1/${e.url}`,t);return new Promise((e,t)=>{fetch(n).then(e=>{if(e.ok)return e.json();throw e}).then(t=>{if(0!==t.code)throw t;e(t.data)}).catch(e=>{let n;if(404===e.status)n="API不存在";else if(500===e.status)n="内部服务器发生错误";else switch(e.code){case 401:n=401;break;case 1001:n="创建对象失败";break;case 1002:n="更新对象失败";break;case 1003:n="删除对象失败";break;case 1004:n="无权限";break;case 1005:n="对象不存在";break;case 1006:n="获取对象失败";break;default:n=e.error}t(n)})})},formatDate(e){let t=e.getFullYear(),n=e.getMonth()+1,o=e.getDate(),i=e.getHours(),r=e.getMinutes(),s=e.getSeconds();return i=i<10?`0${i}`:i,r=r<10?`0${r}`:r,s=s<10?`0${s}`:s,`${t}-${n}-${o} ${i}:${r}:${s}`},connectWS(e){console.log(`Connecting to ${e.uri} ...`);const t=new WebSocket(e.uri);return t.onopen=(n=>{console.log("RTServer Connection Created!");e.type&&t.send(JSON.stringify({type:e.type,data:"Set Request Type"}));e.host&&t.send(JSON.stringify({type:e.type,data:e.host}))}),t.onmessage=(t=>{e.receive(t.data)}),t.onclose=(e=>{console.log("RTServer Connection Closed!")}),t.onerror=(e=>{console.log("RTServer Connection Broken!");throw new Error(e)}),t},isEmptyObject(e){for(let t in e)if(e.hasOwnProperty(t))return!1;return!0},getJSONKeyByValue(e,t){for(let n in e)if(e.hasOwnProperty(n)&&e[n]===t)return n},isWeixin(){return navigator.userAgent.toLowerCase().match(/micromessenger/)},isWeixinInIphone(){let e=navigator.userAgent.toLowerCase();return e.match(/iphone os/)&&e.match(/micromessenger/)},isMobile(){return/Mobi/i.test(navigator.userAgent)},isMobile2(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},isVisible(e){let t,n,o,i;return i=window.pageYOffset,o=i+Math.min(e.clientHeight,window.innerHeight),n=this.offsetTop(e),t=n+e.clientHeight,n<=o&&t>=i},getScrollTop(){return document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop},getTimeDiff(e){let t=new Date,n=Math.floor(t.getTime()/1e3)-e,o=new Date(1e3*e),i=o.getFullYear(),r=o.getMonth()+1,s=o.getDate(),a=o.getHours(),c=o.getMinutes();return a=0===a?"00":a,c=0===c?"00":c,n<60?(n<1?1:n)+"秒前":n>=60&&n<3600?Math.floor(n/60)+"分钟前":o.toDateString()===t.toDateString()?"今天 "+a+":"+c:i===t.getFullYear()?r+"月"+s+"日 "+a+":"+c:i+"-"+r+"-"+s+" "+a+":"+c},reload(){this.isWeixin()?location.href=location.href+"?v="+1e4*Math.random():location.reload()}}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n.n(o);new Vue({el:"#app",data:{type:null},components:{Viewer:i.a},methods:{view(e){this.$refs.viewer.show(e)}}})},function(e,t){e.exports=function(e,t,n,o,i){var r,s=e=e||{},a=typeof e.default;"object"!==a&&"function"!==a||(r=e,s=e.default);var c="function"==typeof s?s.options:s;t&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns),o&&(c._scopeId=o);var u;if(i?(u=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},c._ssrRegister=u):n&&(u=n),u){var l=c.functional,f=l?c.render:c.beforeCreate;l?c.render=function(e,t){return u.call(t),f(e,t)}:c.beforeCreate=f?[].concat(f,u):[u]}return{esModule:r,exports:s,options:c}}},function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.bShowViewer,expression:"bShowViewer"}],staticClass:"viewer-container overlay"},[n("div",{staticClass:"viewer-canvas"},[n("div",{staticClass:"img-wrap",style:e.imgStyle})]),e._v(" "),n("div",{staticClass:"viewer-footer"},[n("ul",{staticClass:"viewer-toolbar"},[n("li",{staticClass:"fa fa-plus",on:{click:function(t){e.ratio+=.1}}}),e._v(" "),n("li",{staticClass:"fa fa-minus",on:{click:function(t){e.ratio=Math.max(e.ratio-=.1,.1)}}}),e._v(" "),n("li",{staticClass:"font-14",on:{click:function(t){e.ratio=1}}},[e._v("1:1")]),e._v(" "),n("li",{staticClass:"fa fa-chevron-left",on:{click:e.prev}}),e._v(" "),n("li",{staticClass:"fa fa-play viewer-play"}),e._v(" "),n("li",{staticClass:"fa fa-chevron-right",on:{click:e.next}}),e._v(" "),n("li",{staticClass:"fa fa-reply",on:{click:function(t){e.degree-=90}}}),e._v(" "),n("li",{staticClass:"fa fa-share",on:{click:function(t){e.degree+=90}}})]),e._v(" "),n("div",{staticClass:"viewer-navbar"})]),e._v(" "),n("div",{staticClass:"viewer-close",on:{click:e.close}})])},staticRenderFns:[]},e.exports.render._withStripped=!0}]);